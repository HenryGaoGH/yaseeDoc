---
title: 初始电量&双插口插拔 问题与方案
description: 领导及同事, 这里是我们内部的文档中心,可以通过这里看我们自己的文档
keywords: [欢迎, Yasee, 同事, 领导, SDK, 集成, BLE, 交互, Hook, 协议, 玉成, 动态体温, 心电]
---

import Tag from '@site/src/components/Tag';
import ImgText from '@site/src/components/ImgText/ImgText';

# 初始电量&双插口插拔 问题与方案


## 外设初始电量上载

### 现情况分析

- 目前暴露出来的问题为:

    设备绑定之后 的 初始电量信息为 100, 之后在连接过程中 每 5% 衰减 会主动通知 手机.

- 希望修正为: 
    1. <Tag text="新增" color="orange" /> 绑定之后, 主机可以上载电量信息 
    2. <Tag text="新增" color="orange" /> 手机 可以主动获取 电量及其他扩展信息
    3. 每 5% 衰减 主动通知 手机

### 对应方案
目前, 通过与硬件沟通, 现有协议中 **没有** 针对设备特定信息的问答支持; 暂时没有其他备选方案.

其中特定信息包含且不限于如下内容:
- 设备电量信息
- 设备硬件版本、软件版本 (可扩展)
- 生产批次信息 (可扩展)
- 生产产线班组 (可扩展)
- 等等 有特殊意义 的 其他扩展 信息内容



指令信息流程如下:
- 新增内容 <Tag text="橙色需新增" color="orange" />
- 现有内容 <Tag text="现有" color="black" />


![电量指令信息](/img/inner/battery_process.png)




## 双插口 拔出指令

### 现情况分析
- 目前暴露出来的问题为:
    1. 插入多次错误的试纸,会累加 错误的内容

- 希望修正为: 
    1. 拔出试纸 发送具体插口拔出试纸
    2. 根据 拔出指令信息 更新 错误的内容
    3. 动态更新 多插口 页面展示



### 对应方案
目前针对拔出试纸之前有预留的协议内容; 因此将预留协议指令开放 作为主要方案.

目前 已和 于工 沟通并进行可行性尝试, 当前结果符合预期; 页面展示如下:

<ImgText width={130} src={"/img/inner/shuangcha166.gif"} text={"1. 插入血糖     <br />2. 插入尿酸<br />3. 拔出尿酸<br />4. 拔出血糖<br />5. 等等逻辑"} />
