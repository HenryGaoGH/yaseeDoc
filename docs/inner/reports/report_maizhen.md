---
title: 脉诊 调研 分析报告
description: 领导及同事, 这里是我们内部的文档中心,可以通过这里看我们自己的文档
keywords: [欢迎, Yasee, 同事, 领导, SDK, 集成, BLE, 交互, Hook, 协议, 玉成, 动态体温, 心电]
---

import Tag from '@site/src/components/Tag';

# 脉诊 调研 分析报告 (软件)
---




## 调研目的

1. [清晰的了解 当前的 **脉诊** 整体的 **测量流程**; 和必要的测量条件](#脉诊测量流程)
2. [以当前的 **脉诊** 资料; 集成到 Yasee 将面临的问题 和 解决方案](#问题--解决方案)
3. [明确并列举 暴露当前 无法解决 和 需要上层沟通的问题](#问题--解决方案)


## 结论

对于 目前 **脉诊** 集成到Yasee的调研; 有如下结论:

1. 使用的传输方式为 **蓝牙**; 当前方式 <Tag text="可接入 Yasee 体系" color="green" />;

2. **脉诊** 提供的蓝牙传输模式有两种: 
    - [ ] 安全的绑定传输模式
    - [x] 快捷的直连传输模式

    其中 直连模式 <Tag text="兼容" color="green" /> 当前的 Yasee 对蓝牙模式要求;

3. 通过提供的协议内容可以实现 <Tag text="有限的控制" color="pink" />(勾选部分为已验证):
    - [x] 加压
    - [x] 减压 
    - [x] 压力保持
    - [ ] 复位
    - [ ] 标定
    - [ ] 探头下移
    


4. 暴露的问题&解决方案:
    - [ ] 目前 验证的指令部分 <Tag text="没有任何表现" color="red" />; 暂时不能定性是否可用

        - 方案: 和脉诊相关人员 沟通

    - [ ] 目前 <Tag text="缺少核心算法库" color="red" /> 来控制命令组合 来获取有效的数据 

        - 方案: 可沟通 脉诊方 封装SDK

    - [ ] 目前 <Tag text="缺少核心解析库" color="red" />; 暂时不能正常解析数据为可用的数据 (数据的意义判别逻辑)

        - 方案: 可沟通 脉诊方 封装SDK

    - [ ] 目前 <Tag text="缺少Yasee标准广播内容" color="red" />; 可暂缓解决; 包含 MAC、蓝牙名称等

        - 方案: 可沟通 脉诊方 修改 BLE 数据

    - [ ] 目前 <Tag text="指令标准 非Yasee标准" color="red" />; 所有的 交互指令 均不符合 Yasee 标准

        - 方案: 可沟通 脉诊方 修改 BLE 数据


## 脉诊测量流程

### 脉诊相关内容 提供的测量条件 和 技术条件

1.  需要 手机 开启相关权限;
2.  需要确定的是数据的传输模式; 和传输方式 当前了解下可以确定传输方式为 **蓝牙**:
且当前的蓝牙模式 提供了 两种传输模式:
    1. 安全的 <Tag text="绑定传输模式" color="red" />; 
    2. 快捷的 <Tag text="直连传输模式" color="green" />; 



1. 将 **脉诊** 设备 集成到 Yasee SDK中; 需要实现的功能为:
    - [x] 正常测量流程
        - [x] 连接设备
        - [x] 控制设备
        - [x] 读取设备数据

    - [ ] 正常的结果分析报告

2. 确定 设备 支持的传输模式:
    - [x] 蓝牙; 并且拆分出了 安全的绑定传输模式 和 快捷的直连传输模式; 因此当前的脉诊是兼容Yasee目前的技术要求;

3. 



### 脉诊App 测量流程
目前 脉诊 设备附带的App 使用的是 安全的绑定连接传输模式; 主要的流程如下:

```
1. 开启蓝牙设备（脉诊设备和手机端）。
2. 在手机或应用端扫描蓝牙设备，找到目标设备。
3. 选择设备并输入配对码（如适用）。
4. 系统完成身份验证和连接建立。
5. 连接成功，
6. 进入 脉诊 App, 选择人员信息
7. 设备可以开始数据交换。查看脉波数据
```



## 问题 & 解决方案

- 目前 验证的指令部分没有任何表现; 暂时不能定性是否可用
    - 方案: 和脉诊相关人员 沟通

- 目前 缺少核心算法库 来控制命令组合 来获取有效的数据 

    目前的单独控制指令都可以控制; 但是整个控制颗粒度无法保证; 也无法确定采集分析所使用的数据 是的通过多少控制指令来控制的; 这部分的程序是核心的算法; 
    需要沟通 脉诊 人员封装SDK来解决

- 目前 缺少核心解析库; 暂时不能正常解析数据为可用的数据 (数据的意义判别逻辑)
    
    实时的数据可以通过订阅拿到; 但是数据对应的具体业务含义需要 详细的解析; 沟通 脉诊 人员封装解析SDK来解决;

- 目前 缺少Yasee标准广播内容; 可暂缓解决; 包含 MAC、蓝牙名称等
    目前 接入 Yasee 可沟通 脉诊方 修改 BLE 数据; 需要符合 Yasee 蓝牙产品广播数据标准;
        1. 需要修改的是 蓝牙名称; 
        2. 需要修改的是 蓝牙MAC;

- 目前 指令标准 非Yasee标准; 所有的 交互指令 均不符合 Yasee 标准

    通讯数据目前可以捕获到; 但是数据包的帧头、帧尾、数据、设备标号、检测项编号等信息都无法满足 Yasee 规范要求;
    需要沟通 数据包 数据标准;


## 自研脉诊 & 接入百合医体系

目前 脉诊 设备是首款自研产品; 结合当前的自研系列产品协议, 接入百合医体系需要做的是:
1. 产品命名规范 & 检测项标识规范
    - 协商制定 命名: 
        - 例如 Y901-XXXX
    - 标识符制定:
        - 例如 0x12 (18)
2. 协议规范调整
    
    目前 **脉诊** 为 绑定使用; 与当前的百合医体系的传输模式不一致; 需要修正为 **非绑定传输模式**, 以满足百合医体系的要求;
    另外; 脉诊 传输数据相对频繁和量大;


3. 数据标准调整

